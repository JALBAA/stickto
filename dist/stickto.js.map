{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 43e0bf39a2d1b8b5be5f","webpack:///./index.js","webpack:///./Sticker.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Sticker","stickQueue","juedge","length","sticking","danger","sticker","shouldStick","forEach","unstick","isInDangerZone","stick","smoothSwitch","document","addEventListener","$el","_ref","arguments","undefined","useClass","zIndex","_Sticker2","default","unshift","destroy","pop","cid","Sticker","_classCallCheck","$elStyle","window","getComputedStyle","classCache","styleCache","position","top","$holder","createElement","className","parentNode","insertBefore","getBoundingClientRect","Number","height","split","replacer","style","transform","getHeight","style1","style2","removeChild","holderRect","stickyStyle","copyStyle"],"mappings":"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","file":"stickto.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stickto\"] = factory();\n\telse\n\t\troot[\"stickto\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 43e0bf39a2d1b8b5be5f","/*\n * @Author: zhaoye \n * @Date: 2018-01-17 15:06:07 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-03-23 22:21:58\n */\nimport Sticker from './Sticker.js'\n\nconst stickQueue = []\n\nfunction juedge () {\n    if (stickQueue.length == 0) return\n    let sticking\n    let danger\n    for (let i = 0; i < stickQueue.length; i++) {\n        const sticker = stickQueue[i]\n        if (sticker.shouldStick(sticker)) {\n            sticking = sticker\n            break\n        }\n    }\n    stickQueue.forEach(sticker => {\n        sticker.unstick()\n        if (sticker.isInDangerZone())\n            danger = sticker\n    })\n    if (sticking) {\n        sticking.stick()\n    }\n    if (sticking && danger) {\n        sticking.smoothSwitch(danger)\n    }\n}\n\nfunction stick ($el, {\n    useClass,\n    zIndex,\n} = {}) {\n    juedge()\n    const sticker = new Sticker($el, useClass, zIndex)\n    stickQueue.unshift(sticker)\n}\n\nfunction unstick (sticker) {\n    if (sticker instanceof Sticker) {\n        sticker.destroy()\n        stickQueue.pop(sticker)\n    } else {\n        for (let i = 0; i < stickQueue.length; i++) {\n            if (sticker.$el == sticker) {\n                const sticker = stickQueue[i]\n                sticker.destroy()\n                stickQueue.pop(sticker)\n                break\n            }\n        }\n    }\n}\n\ndocument.addEventListener('scroll', juedge)\n\nexport {\n    stick,\n    unstick,\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","/*\n * @Author: zhaoye \n * @Date: 2018-03-23 18:06:08 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-03-23 19:04:44\n */\nlet cid = 0\nexport default class Sticker {\n    constructor ($el, useClass, zIndex) {\n        cid++\n        this.$el = $el\n        const $elStyle = window.getComputedStyle($el)\n        this.zIndex = '20'\n        if (zIndex) {\n            this.zIndex = zIndex\n        }\n        this.classCache = ''\n        if (useClass) {\n            this.classCache = useClass\n        } else {\n            this.styleCache = {\n                position: $elStyle.position,\n                top: $elStyle.top,\n                zIndex: $elStyle.zIndex,\n            }\n        }\n        this.$holder = document.createElement('div')\n        this.$holder.className = `auto-generated-stick-holder auto-generated-stick-holder-${cid}`\n\n        this.$el.parentNode.insertBefore(this.$holder, this.$el)\n    }\n    getBoundingClientRect () {\n        return this.$el.getBoundingClientRect()\n    }\n    getHeight () {\n        return Number(window.getComputedStyle(this.$el).height.split('px')[0])\n    }\n    smoothSwitch (replacer) {\n        this.$el.style.transform = `translateY(${replacer.getBoundingClientRect().top - replacer.getHeight()}px)`\n    }\n    copyStyle (style1, style2, name) {\n        if (style1[name] != style2[name]) {\n            style1[name] = style2[name]\n        }\n    }\n    destroy () {\n        this.$holder.parentNode.removeChild(this.$holder)\n        this.$holder = null\n        this.styleCache = null\n        this.$el = null\n        cid--\n    }\n    isInDangerZone () {\n        let $el = this.$el\n        if (this.$holder.style.position == 'fixed') \n            $el = this.$holder\n        const holderRect = $el.getBoundingClientRect()\n        if (holderRect.top > 0 && holderRect.top < Number(window.getComputedStyle($el).height.split('px')[0]))\n            return true\n        else\n            return false\n    }\n    shouldStick () {\n        const holderRect = this.$holder.getBoundingClientRect()\n        if (holderRect.top <= 0)\n            return true\n        else\n            return false\n    }\n    stick () {\n        const stickyStyle = {\n            position: 'fixed',\n            top: '0px',\n            zIndex: this.zIndex,\n        }\n        this.copyStyle(this.$holder.style, window.getComputedStyle(this.$el), 'height')\n        this.copyStyle(this.$el.style, stickyStyle, 'position')\n        this.copyStyle(this.$el.style, stickyStyle, 'top')\n        this.copyStyle(this.$el.style, stickyStyle, 'zIndex')\n    }\n    unstick () {\n        this.copyStyle(this.$el.style, this.styleCache, 'position')\n        this.copyStyle(this.$el.style, this.styleCache, 'top')\n        this.copyStyle(this.$el.style, this.styleCache, 'zIndex')\n        this.copyStyle(this.$holder.style, {height: '0px'}, 'height')\n        this.copyStyle(this.$el.style, {transform: 'translateY(0px)'}, 'transform')\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./Sticker.js"],"sourceRoot":""}