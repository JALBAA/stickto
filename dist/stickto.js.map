{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fd820014787a70d19d60","webpack:///./index.js","webpack:///./Sticker.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Sticker","stickers","juedge","length","sticking","danger","sticker","isInDangerZone","shouldStick","unstick","stick","smoothSwitch","document","addEventListener","$el","_ref","arguments","undefined","className","zIndex","_Sticker2","default","unshift","targetSticker","filter","destroy","cid","Sticker","_classCallCheck","$elStyle","window","getComputedStyle","trim","styleCache","position","top","$holder","createElement","parentNode","insertBefore","getBoundingClientRect","Number","height","split","replacer","style","transform","getHeight","style1","style2","removeChild","holderRect","stickyStyle","copyStyle","match","RegExp","reg","replace"],"mappings":"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","file":"stickto.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stickto\"] = factory();\n\telse\n\t\troot[\"stickto\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fd820014787a70d19d60","/*\n * @Author: zhaoye \n * @Date: 2018-01-17 15:06:07 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-03-24 12:02:56\n */\nimport Sticker from './Sticker.js'\n\nlet stickers = []\n\nfunction juedge () {\n    if (stickers.length == 0) return\n    let sticking\n    let danger\n    let switching\n    for (let i = 0; i < stickers.length; i++) {\n        const sticker = stickers[i]\n        if (sticker.isInDangerZone()) {\n            danger = sticker\n        }\n        if (!sticking && sticker.shouldStick()) {\n            sticking = sticker\n        } else {\n            sticker.unstick()\n        }\n    }\n    if (sticking) {\n        sticking.stick()\n    }\n    if (sticking && danger) {\n        sticking.smoothSwitch(danger)\n    }\n}\n\nfunction stick ($el, {\n    className,\n    zIndex,\n} = {}) {\n    juedge()\n    const sticker = new Sticker($el, className, zIndex)\n    stickers.unshift(sticker)\n    return sticker\n}\n\nfunction unstick (targetSticker) {\n    stickers = stickers.filter(sticker => {\n        if (targetSticker instanceof Sticker && sticker == targetSticker) {\n            targetSticker.destroy()\n            return false\n        } else if (sticker.$el == targetSticker) {\n            sticker.destroy()\n            return false\n        }\n        return true\n    })\n}\n\ndocument.addEventListener('scroll', juedge)\n\nexport {\n    stick,\n    unstick,\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","/*\n * @Author: zhaoye \n * @Date: 2018-03-23 18:06:08 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-03-24 12:04:32\n */\n\nlet cid = -1\nexport default class Sticker {\n    constructor ($el, className, zIndex) {\n        cid++\n        this.cid = cid\n        this.$el = $el\n        const $elStyle = window.getComputedStyle($el)\n        this.zIndex = '20'\n        if (zIndex) {\n            this.zIndex = zIndex\n        }\n        this.className = 'stickto-auto-generated-sticky'\n        if (className) {\n            this.className = className.trim()\n        }\n        this.styleCache = {\n            position: $elStyle.position,\n            top: $elStyle.top,\n            zIndex: $elStyle.zIndex,\n        }\n        this.$holder = document.createElement('div')\n        this.$holder.className = `auto-generated-stick-holder auto-generated-stick-holder-${this.cid}`\n\n        this.$el.parentNode.insertBefore(this.$holder, this.$el)\n    }\n    getBoundingClientRect () {\n        return this.$el.getBoundingClientRect()\n    }\n    getHeight () {\n        return Number(window.getComputedStyle(this.$el).height.split('px')[0])\n    }\n    smoothSwitch (replacer) {\n        this.$el.style.transform = `translate3d(0,${replacer.getBoundingClientRect().top - replacer.getHeight()}px,0)`\n    }\n    copyStyle (style1, style2, name) {\n        if (style1[name] !== style2[name])\n            style1[name] = style2[name]\n    }\n    destroy () {\n        this.unstick()\n        this.$holder.parentNode.removeChild(this.$holder)\n        this.$holder = null\n        this.styleCache = null\n        this.$el = null\n        cid--\n    }\n    isInDangerZone () {\n        const holderRect = this.$holder.getBoundingClientRect()\n        const height = Number(window.getComputedStyle(this.$el).height.split('px')[0])\n        if (holderRect.top > 0 && holderRect.top < height)\n            return true\n        else\n            return false\n    }\n    shouldStick () {\n        const holderRect = this.$holder.getBoundingClientRect()\n        const height = Number(window.getComputedStyle(this.$el).height.split('px')[0])\n        \n        if (holderRect.top <= 0)\n            return true\n        else\n            return false\n    }\n    stick () {\n        const stickyStyle = {\n            position: 'fixed',\n            top: '0px',\n            zIndex: this.zIndex,\n        }\n        this.copyStyle(this.$holder.style, window.getComputedStyle(this.$el), 'height')\n        this.copyStyle(this.$el.style, stickyStyle, 'position')\n        this.copyStyle(this.$el.style, stickyStyle, 'top')\n        this.copyStyle(this.$el.style, stickyStyle, 'zIndex')\n        this.copyStyle(this.$el.style, {transform: 'translate3d(0,0,0)'}, 'transform')\n        if (this.className && !this.$el.className.match(new RegExp(this.className))) {\n            this.$el.className += ` ${this.className}`\n        }\n    }\n    unstick () {\n        const reg = new RegExp(` ${this.className}`, 'g')\n        this.copyStyle(this.$el.style, this.styleCache, 'position')\n        this.copyStyle(this.$el.style, this.styleCache, 'top')\n        this.copyStyle(this.$el.style, this.styleCache, 'zIndex')\n        this.copyStyle(this.$holder.style, {height: '0px'}, 'height')\n        this.copyStyle(this.$el.style, {transform: 'translate3d(0,0,0)'}, 'transform')\n        if (this.className && this.$el.className.match(reg)) {\n            this.$el.className = this.$el.className.replace(reg, '')\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./Sticker.js"],"sourceRoot":""}