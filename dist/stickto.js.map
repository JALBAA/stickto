{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 81555be71bdc0187db51","webpack:///./index.js","webpack:///./Sticker.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Sticker","stickers","juedge","length","sticking","possibleDanger","danger","sticker","shouldStick","unstick","isInDangerZone","stick","smoothSwitch","document","addEventListener","$el","_ref","arguments","undefined","className","zIndex","_Sticker2","default","unshift","targetSticker","filter","destroy","cid","Sticker","_classCallCheck","$elStyle","window","getComputedStyle","trim","styleCache","position","top","$holder","createElement","parentNode","insertBefore","getBoundingClientRect","Number","height","split","replacer","style","transform","getHeight","style1","style2","removeChild","holderRect","stickyStyle","copyStyle","match","RegExp","reg","replace"],"mappings":"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","file":"stickto.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stickto\"] = factory();\n\telse\n\t\troot[\"stickto\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 81555be71bdc0187db51","/*\n * @Author: zhaoye \n * @Date: 2018-01-17 15:06:07 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-03-24 12:29:05\n */\nimport Sticker from './Sticker.js'\n\nlet stickers = []\n\nfunction juedge () {\n    if (stickers.length == 0) return\n    let sticking\n    let possibleDanger\n    let danger\n    let switching\n    for (let i = 0; i < stickers.length; i++) {\n        const sticker = stickers[i]\n        if (!sticking && sticker.shouldStick()) {\n            sticking = sticker\n            if (stickers[i - 1]) {\n                possibleDanger = stickers[i - 1]\n            }\n        } else {\n            sticker.unstick()\n        }\n    }\n    if (sticking && possibleDanger && possibleDanger.isInDangerZone(sticking)) {\n        danger = possibleDanger\n    }\n    if (sticking) {\n        sticking.stick()\n    }\n    if (sticking && danger) {\n        sticking.smoothSwitch(danger)\n    }\n}\n\nfunction stick ($el, {\n    className,\n    zIndex,\n} = {}) {\n    juedge()\n    const sticker = new Sticker($el, className, zIndex)\n    stickers.unshift(sticker)\n    return sticker\n}\n\nfunction unstick (targetSticker) {\n    stickers = stickers.filter(sticker => {\n        if (targetSticker instanceof Sticker && sticker == targetSticker) {\n            targetSticker.destroy()\n            return false\n        } else if (sticker.$el == targetSticker) {\n            sticker.destroy()\n            return false\n        }\n        return true\n    })\n}\n\ndocument.addEventListener('scroll', juedge)\n\nexport {\n    stick,\n    unstick,\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","/*\n * @Author: zhaoye \n * @Date: 2018-03-23 18:06:08 \n * @Last Modified by: zhaoye\n * @Last Modified time: 2018-04-08 23:31:14\n */\n\nlet cid = -1\nexport default class Sticker {\n    constructor ($el, className, zIndex) {\n        cid++\n        this.cid = cid\n        this.$el = $el\n        const $elStyle = window.getComputedStyle($el)\n        this.zIndex = '20'\n        if (zIndex) {\n            this.zIndex = zIndex\n        }\n        this.className = 'stickto-auto-generated-sticker'\n        if (className) {\n            this.className = className.trim()\n        }\n        this.styleCache = {\n            position: $elStyle.position,\n            top: $elStyle.top,\n            zIndex: $elStyle.zIndex,\n        }\n        this.$holder = document.createElement('div')\n        this.$holder.className = `stickto-auto-generated-stick-holder stickto-auto-generated-stick-holder-${this.cid}`\n\n        this.$el.parentNode.insertBefore(this.$holder, this.$el)\n    }\n    getBoundingClientRect () {\n        return this.$el.getBoundingClientRect()\n    }\n    getHeight () {\n        return Number(window.getComputedStyle(this.$el).height.split('px')[0])\n    }\n    smoothSwitch (replacer) {\n        this.$el.style.transform = `translate(0,${replacer.getBoundingClientRect().top - this.getHeight()}px)`\n    }\n    copyStyle (style1, style2, name) {\n        if (style1[name] !== style2[name])\n            style1[name] = style2[name]\n    }\n    destroy () {\n        this.unstick()\n        this.$holder.parentNode.removeChild(this.$holder)\n        this.$holder = null\n        this.styleCache = null\n        this.$el = null\n        cid--\n    }\n    isInDangerZone (sticking) {\n        const holderRect = this.$holder.getBoundingClientRect()\n        const height = Number(window.getComputedStyle(sticking.$el).height.split('px')[0])\n        if (holderRect.top > 0 && holderRect.top < height)\n            return true\n        else\n            return false\n    }\n    shouldStick () {\n        const holderRect = this.$holder.getBoundingClientRect()\n        const height = Number(window.getComputedStyle(this.$el).height.split('px')[0])\n        \n        if (holderRect.top <= 0)\n            return true\n        else\n            return false\n    }\n    stick () {\n        const stickyStyle = {\n            position: 'fixed',\n            top: '0px',\n            zIndex: this.zIndex,\n        }\n        this.copyStyle(this.$holder.style, window.getComputedStyle(this.$el), 'height')\n        this.copyStyle(this.$el.style, stickyStyle, 'position')\n        this.copyStyle(this.$el.style, stickyStyle, 'top')\n        this.copyStyle(this.$el.style, stickyStyle, 'zIndex')\n        this.copyStyle(this.$el.style, {transform: 'translate(0,0)'}, 'transform')\n        if (this.className && !this.$el.className.match(new RegExp(this.className))) {\n            this.$el.className += ` ${this.className}`\n        }\n    }\n    unstick () {\n        const reg = new RegExp(` ${this.className}`, 'g')\n        this.copyStyle(this.$el.style, this.styleCache, 'position')\n        this.copyStyle(this.$el.style, this.styleCache, 'top')\n        this.copyStyle(this.$el.style, this.styleCache, 'zIndex')\n        this.copyStyle(this.$holder.style, {height: '0px'}, 'height')\n        this.copyStyle(this.$el.style, {transform: 'translate(0,0)'}, 'transform')\n        if (this.className && this.$el.className.match(reg)) {\n            this.$el.className = this.$el.className.replace(reg, '')\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./Sticker.js"],"sourceRoot":""}